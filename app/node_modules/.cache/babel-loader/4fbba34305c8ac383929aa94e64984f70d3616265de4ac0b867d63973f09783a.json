{"ast":null,"code":"export class FAAddInstruction {\n  constructor(_index, value, nodes) {\n    this.index = void 0;\n    this.value = void 0;\n    this.nodes = void 0;\n    this.getNodePosition = index => {\n      if (index < 0 || isNaN(index)) return {\n        x: 0,\n        y: 0\n      };\n      if (index === 0) return {\n        x: 250,\n        y: 50\n      }; // Root at the center\n\n      const depth = Math.floor(Math.log2(index + 1)); // Get depth in the tree\n      const xSpacing = 200 / (depth + 1); // Adjust x spacing\n      const ySpacing = 80; // Vertical spacing\n\n      const parentIndex = Math.floor((index - 1) / 2);\n      const parentPos = this.getNodePosition(parentIndex);\n      const isLeftChild = index % 2 === 1;\n      const xOffset = isLeftChild ? -xSpacing : xSpacing;\n      return {\n        x: parentPos.x + xOffset,\n        y: parentPos.y + ySpacing\n      };\n    };\n    this.index = _index;\n    this.value = value;\n    this.nodes = nodes;\n  }\n  async process(svg) {\n    const position = this.getNodePosition(this.index);\n    let nodesGroup = svg.select(\"g.nodes\");\n    if (nodesGroup.empty()) {\n      nodesGroup = svg.append(\"g\").attr(\"class\", \"nodes\");\n    }\n    const nodeElement = nodesGroup.append(\"circle\").attr(\"cx\", 200).attr(\"cy\", 200).attr(\"r\", 20).attr(\"class\", \"node\").style(\"opacity\", 0);\n\n    // Creates the text label on screen\n    const label = nodesGroup.append(\"text\").attr(\"x\", 200).attr(\"y\", 200).attr(\"class\", \"label\").attr(\"text-anchor\", \"middle\").attr(\"alignment-baseline\", \"middle\").style(\"fill\", \"white\").style(\"font-size\", \"12px\").text(this.value);\n    const nodeTransition = nodeElement.transition().duration(1000).style(\"opacity\", 1).attr(\"cx\", position.x).attr(\"cy\", position.y);\n    await Promise.all([nodeTransition.end()]);\n  }\n}","map":{"version":3,"names":["FAAddInstruction","constructor","index","value","nodes","getNodePosition","isNaN","x","y","depth","Math","floor","log2","xSpacing","ySpacing","parentIndex","parentPos","isLeftChild","xOffset","process","svg","position","nodesGroup","select","empty","append","attr","nodeElement","style","label","text","nodeTransition","transition","duration","Promise","all","end"],"sources":["C:/Users/Micha/Documents/GitHub/dynamic-algorithm-visualizer/app/src/components/Instructions/fa_add_instruction.tsx"],"sourcesContent":["import {Instruction} from \"./i_instruction\";\r\nimport {BaseType, Selection} from \"d3\";\r\nimport {Node} from \"../pictures/node\";\r\n\r\nexport class FAAddInstruction implements Instruction {\r\n\r\n    index: number;\r\n    value: number | string;\r\n    nodes: Node[];\r\n\r\n    constructor(index: number, value: number | string, nodes : Node[]) {\r\n        this.index = index;\r\n        this.value = value;\r\n        this.nodes = nodes;\r\n    }\r\n\r\n    async process(svg: Selection<BaseType, unknown, HTMLElement, any>): Promise<void> {\r\n\r\n        const position = this.getNodePosition(this.index);\r\n\r\n        let nodesGroup = svg.select<SVGGElement>(\"g.nodes\");\r\n\r\n        if (nodesGroup.empty()) {\r\n            nodesGroup = svg.append(\"g\").attr(\"class\", \"nodes\");\r\n        }\r\n\r\n        const nodeElement = nodesGroup.append(\"circle\")\r\n            .attr(\"cx\", 200)\r\n            .attr(\"cy\", 200)\r\n            .attr(\"r\", 20)\r\n            .attr(\"class\", \"node\")\r\n            .style(\"opacity\", 0);\r\n\r\n        // Creates the text label on screen\r\n        const label = nodesGroup.append(\"text\")\r\n            .attr(\"x\", 200)\r\n            .attr(\"y\", 200)\r\n            .attr(\"class\", \"label\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"alignment-baseline\", \"middle\")\r\n            .style(\"fill\", \"white\")\r\n            .style(\"font-size\", \"12px\")\r\n            .text(this.value);\r\n\r\n        const nodeTransition = nodeElement.transition()\r\n            .duration(1000)\r\n            .style(\"opacity\", 1)\r\n            .attr(\"cx\", position.x)\r\n            .attr(\"cy\", position.y)\r\n\r\n        await Promise.all([nodeTransition.end()]);\r\n    }\r\n\r\n    getNodePosition = (index: number): { x: number, y: number } => {\r\n        if (index < 0 || isNaN(index)) return { x: 0, y: 0 };\r\n        if (index === 0) return { x: 250, y: 50 }; // Root at the center\r\n\r\n        const depth = Math.floor(Math.log2(index + 1)); // Get depth in the tree\r\n        const xSpacing = (200) / (depth + 1); // Adjust x spacing\r\n        const ySpacing = 80; // Vertical spacing\r\n\r\n        const parentIndex = Math.floor((index - 1) / 2);\r\n        const parentPos = this.getNodePosition(parentIndex);\r\n\r\n        const isLeftChild = index % 2 === 1;\r\n        const xOffset = isLeftChild ? -xSpacing : xSpacing;\r\n\r\n        return { x: parentPos.x + xOffset, y: parentPos.y + ySpacing };\r\n    };\r\n\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}